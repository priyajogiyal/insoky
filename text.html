<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Selector</title>
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <style>
        body {
    font-family: Arial, sans-serif;
}

.dropdown-container {
    position: relative;
    display: inline-block;
    width: 300px;
    margin-bottom: 20px;
}

input[type="text"] {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    max-height: 200px;
    overflow-y: auto;
    width: 100%;
}

.dropdown-content div {
    padding: 12px 16px;
    cursor: pointer;
}

.dropdown-content div:hover {
    background-color: #f1f1f1;
}

.show {
    display: block;
}

button[type="submit"] {
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    cursor: pointer;
}

button[type="submit"]:hover {
    background-color: #45a049;
}

    </style>
</head>
<body>
    <form id="locationForm">
        <div class="dropdown-container">
            <input type="text" class="stateInput" placeholder="Type or select a state">
            <div class="dropdown-content"></div>
        </div>
        <div class="dropdown-container">
            <input type="text" class="cityInput" placeholder="Type or select a city" disabled>
            <div class="dropdown-content"></div>
        </div>
        <div class="dropdown-container">
            <input type="text" class="townInput" placeholder="Type or select a town" disabled>
            <div class="dropdown-content"></div>
        </div>
        <button type="submit">Submit</button>
    </form>
    <!-- <script src="script.js"></script> -->
    <script>
        const states = [
    "Maharashtra", "Delhi", "Karnataka", "Telangana", "Gujarat", 
    "Tamil Nadu", "West Bengal", "Rajasthan", "Uttar Pradesh", "Madhya Pradesh"
];

const cities = {
    "Maharashtra": ["Mumbai", "Pune", "Nagpur"],
    "Delhi": ["New Delhi"],
    "Karnataka": ["Bangalore", "Mysore"],
    "Telangana": ["Hyderabad"],
    "Gujarat": ["Ahmedabad", "Surat"],
    "Tamil Nadu": ["Chennai", "Coimbatore"],
    "West Bengal": ["Kolkata"],
    "Rajasthan": ["Jaipur", "Udaipur"],
    "Uttar Pradesh": ["Lucknow", "Kanpur"],
    "Madhya Pradesh": ["Bhopal", "Indore"]
};

const towns = {
    "Mumbai": ["Andheri", "Borivali"],
    "Pune": ["Kothrud", "Shivajinagar"],
    "Nagpur": ["Dharampeth", "Sitabuldi"],
    "New Delhi": ["Chandni Chowk", "Connaught Place"],
    "Bangalore": ["Whitefield", "Koramangala"],
    "Mysore": ["Vijayanagar", "Gokulam"],
    "Hyderabad": ["Banjara Hills", "Hitech City"],
    "Ahmedabad": ["Navrangpura", "Paldi"],
    "Surat": ["Adajan", "Vesu"],
    "Chennai": ["T. Nagar", "Velachery"],
    "Coimbatore": ["RS Puram", "Peelamedu"],
    "Kolkata": ["Salt Lake", "Howrah"],
    "Jaipur": ["Malviya Nagar", "Vaishali Nagar"],
    "Udaipur": ["Hiran Magri", "Fatehpura"],
    "Lucknow": ["Aliganj", "Gomti Nagar"],
    "Kanpur": ["Swaroop Nagar", "Civil Lines"],
    "Bhopal": ["Arera Colony", "MP Nagar"],
    "Indore": ["Vijay Nagar", "Palasia"]
};

class LocationDropdown {
    constructor(container, data, placeholder) {
        this.container = container;
        this.input = container.querySelector('input[type="text"]');
        this.dropdown = container.querySelector('.dropdown-content');
        this.data = data;
        this.placeholder = placeholder;
        this.init();
    }

    init() {
        this.input.placeholder = this.placeholder;
        this.input.addEventListener('keyup', () => this.filterItems());
        document.addEventListener('click', (event) => this.handleOutsideClick(event));
    }

    filterItems() {
        const input = this.input.value.toLowerCase();
        this.dropdown.innerHTML = ''; // Clear previous items

        let filterMatch = false;
        Object.keys(this.data).forEach(key => {
            if (key.toLowerCase().indexOf(input) > -1) {
                const div = document.createElement('div');
                div.textContent = key;
                div.addEventListener('click', () => {
                    this.input.value = key;
                    this.closeDropdown();
                    if (this.placeholder === 'Type or select a state') {
                        const cityDropdown = new LocationDropdown(document.querySelector('.cityInput').closest('.dropdown-container'), cities[key], 'Type or select a city');
                        document.querySelector('.cityInput').disabled = false;
                        document.querySelector('.townInput').disabled = true;
                        document.querySelector('.townInput').value = '';
                        document.querySelector('.townInput').closest('.dropdown-container').querySelector('.dropdown-content').innerHTML = '';
                    } else if (this.placeholder === 'Type or select a city') {
                        const townDropdown = new LocationDropdown(document.querySelector('.townInput').closest('.dropdown-container'), towns[key], 'Type or select a town');
                        document.querySelector('.townInput').disabled = false;
                    }
                });
                this.dropdown.appendChild(div);
                filterMatch = true;
            }
        });

        if (filterMatch) {
            this.dropdown.classList.add('show');
        } else {
            this.dropdown.classList.remove('show');
        }
    }

    closeDropdown() {
        this.dropdown.classList.remove('show');
    }

    handleOutsideClick(event) {
        if (!this.container.contains(event.target)) {
            this.closeDropdown();
        }
    }
}

document.addEventListener("DOMContentLoaded", () => {
    new LocationDropdown(document.querySelector('.stateInput').closest('.dropdown-container'), states, 'Type or select a state');
});

    </script>
</body>
</html>
